/* eslint-disable  func-names */
/* eslint quote-props: ["error", "consistent"]*/

'use strict';
const Alexa = require('alexa-sdk');

//=========================================================================================================================================
//System basic coding( No entering for App Id )- Matthew
//=========================================================================================================================================
const APP_ID = undefined;
const SKILL_NAME = 'MR.RECIPE';
const GET_FACT_MESSAGE = "Here's your food and recipe: ";
const HELP_MESSAGE = 'You can say tell me a recipe, or, you can say exit... What can I help you with?';
const HELP_REPROMPT = 'What can I help you with?';
const STOP_MESSAGE = 'Goodbye!';

//=========================================================================================================================================
//Data Storage
//=========================================================================================================================================
const data = [
   'I would reccomend you Serendipity Bread. It may take a while. To make it, prepare 11/4 cups water, 2 tablespoons butter, 2 tablespoons white sugar, 2 tablespoons milk powder, 11/2 teaspoons salt, 1 cup bread flour, 1/2 teaspoons active dry yeast, 2 tablespoons olive oil, 2 teaspoons garlic powder (optional), 4 ounces crumbled feta cheese (optional). Then, place the first set of ingredients into the pan of the bread machine in the order recommended by the manufacturer. Select DOUGH cycle; press START. Do not put in the olive oil, garlic powder or feta cheese. Then, preheat an outdoor grill for medium heat. When the cycle has ended, turn the dough out onto a lightly floured surface, and divide into 2 halves. Roll each half out into a circle that is about 9 or 10 inches across. Brush the top of each circle with olive oil. Place the bread circles oil side down onto the grill. Brush the other side with olive oil, and watch carefully. When the bottom side is browned, turn over the bread, and grill the other side until golden. If desired, sprinkle with garlic powder and feta cheese. Now, its time to taste your food! Good Luck!',
    'I would reccomend you Blueberry Zucchini Bread. It may take a while. To make it, prepare 3 eggs, lightly beaten1 cup vegetable oil, 3 teaspoons vanilla extract, 21/4 cups white sugar, 2 cups shredded zucchini, 3 cups all-purpose flour, 1 teaspoon salt1 teaspoon baking powder, 1/4 teaspoon baking soda, 1 tablespoon ground cinnamon, 1 pint fresh blueberries. Then Preheat oven to 350 degrees F (175 degrees C). Lightly grease 4 mini-loaf pans. In a large bowl, beat together the eggs, oil, vanilla, and sugar. Fold in the zucchini. Beat in the flour, salt, baking powder, baking soda, and cinnamon. Gently fold in the blueberries. Transfer to the prepared mini-loaf pans. Bake 50 minutes in the preheated oven, or until a knife inserted in the center of a loaf comes out clean. Cool 20 minutes in pans, then turn out onto wire racks to cool completely. Now its time to taste your food. Good Luck!',
    'I would reccomend you Fluffy Pancakes. It would take around 10 minutes. To make it, prepare 3/4 cup milk, 2 tablespoons white vinegar, 1 cup all-purpose flour, 2 tablespoons white sugar, 1 teaspoon baking powder, 1/2 teaspoon baking soda, 1/2 teaspoon salt, 1 egg, 2 tablespoons butter, meltedcooking spray. Next, combine milk with vinegar in a medium bowl and set aside for 5 minutes to "sour".Combine flour, sugar, baking powder, baking soda, and salt in a large mixing bowl. Whisk egg and butter into "soured" milk. Pour the flour mixture into the wet ingredients and whisk until lumps are gone. Heat a large skillet over medium heat, and coat with cooking spray. Pour 1/4 cupfuls of batter onto the skillet, and cook until bubbles appear on the surface. Flip with a spatula, and cook until browned on the other side. Now its time to taste your food. Good Luck!',
    'I would reccomend you Health Nut Blueberry Muffins. You would need around 15 minutes. To make it, prepare 3/4 cup all-purpose flour, 3/4 cup whole wheat flour, 3/4 cup white sugar, 1/4 cup oat bran, 1/4 cup quick cooking oats, 1/4 cup wheat germ1 teaspoon baking powder, 1 teaspoon baking soda, 1/4 teaspoon salt1 cup blueberries, 1/2 cup chopped walnuts, 1 banana mashed, 1 cup buttermilk, 1 egg, 1 tablespoon vegetable oil, 1 teaspoon vanilla extract. Then, preheat the oven to 350 degrees F (175 degrees C). Grease a 12 cup muffin pan, or line with paper muffin cups.In a large bowl, stir together the all-purpose flour, whole wheat flour, sugar, oat bran, quick-cooking oats, wheat germ, baking powder, baking soda and salt. Gently stir in the blueberries and walnuts. In a separate bowl, mix together the mashed banana, buttermilk, egg, oil and vanilla. Pour the wet ingredients into the dry, and mix just until blended. Spoon into muffin cups, filling all the way to the top. Bake for 15 to 18 minutes in the preheated oven, or until the tops of the muffins spring back when lightly touched. Now its time to taste your food! Good Luck!',
    'I would reccomend you to eat Deep-Fried Lasagna Pieces. It would take around 23 minutes. To make it, prepare 1 pound ground beef, 1 pound ground Italian sausage, 1 (8 ounce) package manicotti shells, 1 (24 ounce) carton cottage cheese drained, 2 (16 ounce) jars pizza sauce divided, 1 (8 ounce) package shredded mozzarella cheese, vegetable oil for frying, 1/2 cup all-purpose flour, 3 eggs, 2 cups bread crumbs. Next, Heat a large skillet over medium heat. Add beef and Italian sausage; cook and stir until browned, about 8 minutes. Drain excess grease. Let cool slightly. Bring a large pot of lightly salted water to a boil. Cook manicotti shells in the boiling water, stirring occasionally until tender yet firm to the bite, about 7 minutes. Drain. Mix cooled beef and sausage, cottage cheese, 1 jar pizza sauce, and mozzarella cheese together in a large bowl. Stuff shells generously with mixture. Arrange stuffed shells on a baking sheet and freeze until firm, 15 to 20 minutes. Cut each shell into 2 or 3 lasagna pieces. Heat oil in a deep-fryer or large saucepan to 350 degrees F (175 degrees C). Place flour in a bowl. Beat eggs in another bowl. Pour bread crumbs onto a shallow plate. Dredge stuffed lasagna pieces in flour. Dip in beaten eggs. Roll in bread crumbs until coated. Fry 4 breaded lasagna pieces at a time in the hot oil until golden brown, 3 to 5 minutes. Repeat with remaining pieces. Pour remaining jar of pizza sauce into a bowl for dipping.',
    'I would recommend you Roasted Eggplant Pastitsio. To make it, prepare 1 large eggplant, halved lengthwise, 1 tablespoon olive oil, one 1/2 cups chopped onions, 1 pound ground lamb, 1 clove garlic minced, one 1/2 teaspoons salt, 1 teaspoon ground cumin, 1 teaspoon dried oregano, 1/4 teaspoon freshly ground black pepper, 1/4 teaspoon ground cinnamon, 1 can diced tomatoes, 1 can crushed tomatoes, 1 tablespoon chopped fresh mint. Then, set oven rack about 6 inches from the heat source and preheat the oven broiler. Line a baking sheet with aluminum foil; place eggplant halves on top. Broil eggplant, checking fairly often and rotating the baking sheet as needed, until the skin blackens and starts to char in places, about 15 minutes. Cool until easily handled, about 5 minutes. Peel off skin and coarsely chop flesh. Heat olive oil in a large skillet over medium heat. Add onions; cook and stir over medium heat until onion is translucent, about 5 minutes. Add lamb and cook, breaking it up into small pieces, until no pink remains, about 5 minutes. Drain grease from the skillet. Stir minced garlic, salt, cumin, oregano, pepper, and cinnamon into the skillet; cook for 1 minute. Stir in chopped eggplant, diced tomatoes, and crushed tomatoes. Bring sauce to a simmer and cook until thickened, about 20 minutes. Remove from heat and stir in chopped mint. Melt butter in a saucepan over medium heat. Stir in flour and cook, stirring constantly, for 2 minutes. Pour in milk and whisk until smooth. Add crushed garlic clove, increase heat to high, and bring milk to a boil. Reduce heat and simmer, stirring frequently, until slightly thickened, about 5 minutes more. Remove from heat; discard garlic clove. Whisk eggs in a large heatproof bowl. Pour hot milk mixture in a steady stream into beaten eggs, whisking constantly. Stir in feta cheese, salt, pepper, and nutmeg. Preheat oven to 425 degrees F (220 degrees C). Spray a 9x13-inch baking dish with cooking spray. Bring a large pot of salted water to boil. Add pasta and cook, stirring occasionally, until tender yet firm to the bite, about 12 minutes. Drain. Divide pasta between the white sauce and the lamb sauce and mix to combine. Pour the pasta with lamb sauce into the prepared baking dish; spread the pasta with white sauce on top. Bake in the preheated oven until top is golden and pastitsio is bubbling, about 30 minutes. Let cool for 5 minutes before serving.',
    'I would recommend you Round meat. To make it, prepare 300g of beef, 1 teaspoon of chopped garlic, 1/2 teaspoon of pepper, 1/2 cup flour, 1/2 teaspoon of salt, 1 tofu, 6 onions, 3 eggs. Then, tofu should be drained after finishing well, or wrapped in cloth and squeeze the water. Mix well-tofu and meat, chopped garlic, salt, pepper and chopped onion in a medium-sized bowl. Stir well so that the tofu and the meat are not lumpy. Pick a spoon to make a small, round, bite-sized ball. Fry the pan with oil. After putting the flour on the ball and putting the salt, bake in a medium frying pan on a frying pan.',
    'I would recommend you Galbijjim. To make it, prepare Ribs (steamed) 1200g, 3/4 cup water, 1/3 cup of sugar, 2 tablespoons of garlic, 1/2 teaspoon salt, Potato 120g (3 pieces), 1/4 cup soy sauce, 3 tablespoons of pear juice, 1/2 teaspoon sesame seeds, 1/2 teaspoon of pepper. Then, remove the oil from the ribs and cut the thick portion to a suitable thickness and wash it in cold water. When cutting the ribs, be careful because the bone powder sticks to the colander and can be chewed when you eat. In a large bowl, mix finely chopped pear juice and water, soy sauce, sugar, garlic, sesame seeds, salt and pepper and mix well with sugar. Put the meat in the sauce and put it in overnight. The next day, put the meat in the sauce into a pressure pan and put it in the middle fire for 25 minutes. Turn off the lights and leave them for 15 minutes. The deep taste of the meat is a boil while steaming. Place meat and broth separately in a separate bowl and leave in the refrigerator overnight. The next day, we remove the oil that has hardened on the broth. Cut the unpeeled potatoes into 3 - 4 pieces and put them in the broth and put them in the middle fire for about 25 minutes. While the potatoes are ripe, remove the white oil attached to the meat. When the potatoes are ripe, add the meat to the broth and stir well 2-3 times. It takes 15 minutes more to weaken. Turn off the light and mix it evenly, and please enjoy it nicely in the steamed bowl.',
    'I would recommend you Chicken breast salad. To make it, prepare 200g of chicken, 100g of Top mushroom, 1 teaspoon of chopped garlic, 1 tablespoon of sugar, 1tavlespoon of sesame oil, 1 cucumber, 6 cherry tomatoes, 1 tablespoon of vinegar, 1 tablespoon of sesame, 1teaspoon of salt. Then, chicken breast is boiled water a little salt, boil, chill and tear after cooling. Cucumber is cut into 5cm length and dipped in water. The top mushrooms are cut off from the base, washed in water, and then drained. Mix garlic cloves with vinegar, sugar, salt, sesame oil and sesame oil to make a dressing. Put all the ingredients in a bowl, put the dressing in a bowl and decorate with cherry tomatoes.',
    'I would recommend you Egg Custard. To make it, prepare two eggs, 3 cups of water, 1/2 teaspoon salt. Then, boil 3 cups of water in a pot of boiling water. If the pot is too large, it may take too long to boil. While the water is blowing, put the eggs and salt in a glass bowl with heat and stir well. Slowly pour a cup of boiling water into the egg and continue stirring with a fork. Spoon out the foam that floats on the egg. Put the egg in the pot with the bowl and cover it with the lid or plate. In the middle fire for 10 minutes. Turn off the fire and place it on the table with the glass bowl and eat it until the eggs are cooked.',
    'I would reccomend you to eat energy bars. If you want other foods ask me again! Enjoy your food!',
    'I would reccomend you to eat cookies with milk. They would help you to make you feel full. Enjoy your food',
    'I would reccomend you to eat bread with tomato sauce. To make it, rip a bread and dip it into a plate of tomato sauce. Enjoy your food!',
    'I would reccomend you to eat eggs with salt or potatos with sugar. It would make you feel better or good if you are hungry. Enjoy your food!',
    'I would recommend you to eat ramen. I would only suggest you to eat this in a emergency. It is not that healthy for you, however you could eat it very easily and quickly. If you want other foods ask me again. Enjoy your food!'
];
//=========================================================================================================================================
//Real Coding
//=========================================================================================================================================

const handlers = {
    'LaunchRequest': function () {
        this.emit('GetNewFactIntent');
    },
    'GetNewFactIntent': function () {
        const factArr = data;
        const factIndex = Math.floor(Math.random() * factArr.length);
        const randomFact = factArr[factIndex];
        const speechOutput = GET_FACT_MESSAGE + randomFact;

        this.response.cardRenderer(SKILL_NAME, randomFact);
        this.response.speak(speechOutput);
        this.emit(':responseReady');
    },
    'AMAZON.HelpIntent': function () {
        const speechOutput = HELP_MESSAGE;
        const reprompt = HELP_REPROMPT;

        this.response.speak(speechOutput).listen(reprompt);
        this.emit(':responseReady');
    },
    'AMAZON.CancelIntent': function () {
        this.response.speak(STOP_MESSAGE);
        this.emit(':responseReady');
    },
    'AMAZON.StopIntent': function () {
        this.response.speak(STOP_MESSAGE);
        this.emit(':responseReady');
    },
};

exports.handler = function (event, context, callback) {
    const alexa = Alexa.handler(event, context, callback);
    alexa.APP_ID = APP_ID;
    alexa.registerHandlers(handlers);
    alexa.execute();
};
